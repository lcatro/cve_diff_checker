From e5c063a1007506ba69e97a35effcdef944421c89 Mon Sep 17 00:00:00 2001
From: Cristy <urban-warrior@imagemagick.org>
Date: Sun, 23 Jul 2017 10:39:31 -0400
Subject: [PATCH] https://github.com/ImageMagick/ImageMagick/issues/598

---
 coders/mat.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/coders/mat.c b/coders/mat.c
index 1f4a5af73e..be646a0081 100644
--- a/coders/mat.c
+++ b/coders/mat.c
@@ -937,7 +937,8 @@ static Image *ReadMATImage(const ImageInfo *image_info,ExceptionInfo *exception)
   if (strncmp(MATLAB_HDR.identific, "MATLAB", 6))
     {
 MATLAB_KO:
-      clone_info=DestroyImageInfo(clone_info);
+      if (clone_info != (ImageInfo *) NULL)
+        clone_info=DestroyImageInfo(clone_info);
       ThrowReaderException(CorruptImageError,"ImproperImageHeader");
     }
 
