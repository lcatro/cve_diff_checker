From 89115db7031e181eb8fb4ec2822bc6cab88e7071 Mon Sep 17 00:00:00 2001
From: ejnshtein <ejnshtein@gmail.com>
Date: Tue, 8 Jun 2021 16:37:58 +0300
Subject: [PATCH] fixed exec and logs command throwing an error with
 docker.getContainers

---
 build-packages/magento-scripts/lib/commands/execute.js | 2 +-
 build-packages/magento-scripts/lib/commands/logs.js    | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/build-packages/magento-scripts/lib/commands/execute.js b/build-packages/magento-scripts/lib/commands/execute.js
index 42d0808..365c199 100644
--- a/build-packages/magento-scripts/lib/commands/execute.js
+++ b/build-packages/magento-scripts/lib/commands/execute.js
@@ -4,7 +4,7 @@ const executeInContainer = require('../tasks/execute');
 
 module.exports = (yargs) => {
     yargs.command('exec <container name> [commands...]', 'Execute command in docker container', () => {}, async (argv) => {
-        const containers = docker.getContainers();
+        const containers = (await docker).getContainers();
         const services = Object.keys(containers);
 
         if (services.includes(argv.containername) || services.some((service) => service.includes(argv.containername))) {
diff --git a/build-packages/magento-scripts/lib/commands/logs.js b/build-packages/magento-scripts/lib/commands/logs.js
index 3f8d917..25eb8f3 100644
--- a/build-packages/magento-scripts/lib/commands/logs.js
+++ b/build-packages/magento-scripts/lib/commands/logs.js
@@ -60,7 +60,7 @@ module.exports = (yargs) => {
             );
         },
         async (argv) => {
-            const containers = docker.getContainers();
+            const containers = (await docker).getContainers();
             const services = Object.keys(containers);
 
             if (services.includes(argv.scope) || services.some((service) => service.includes(argv.scope))) {
