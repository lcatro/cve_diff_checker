From 55d0333907117c9231ffdf555ae8824705993bbb Mon Sep 17 00:00:00 2001
From: Marijn Haverbeke <marijn@haverbeke.nl>
Date: Fri, 9 Oct 2020 15:38:39 +0200
Subject: [PATCH] [javascript mode] Fix potentially-exponential regexp

---
 mode/javascript/javascript.js | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/mode/javascript/javascript.js b/mode/javascript/javascript.js
index 66e5a308d4..3139fd00d2 100644
--- a/mode/javascript/javascript.js
+++ b/mode/javascript/javascript.js
@@ -126,7 +126,7 @@ CodeMirror.defineMode("javascript", function(config, parserConfig) {
           var kw = keywords[word]
           return ret(kw.type, kw.style, word)
         }
-        if (word == "async" && stream.match(/^(\s|\/\*.*?\*\/)*[\[\(\w]/, false))
+        if (word == "async" && stream.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/, false))
           return ret("async", "keyword", word)
       }
       return ret("variable", "variable", word)
