From ce08a3691a8ac29125e29fc41967b3737fa3f425 Mon Sep 17 00:00:00 2001
From: Cristy <urban-warrior@imagemagick.org>
Date: Tue, 18 Jun 2019 15:17:06 -0400
Subject: [PATCH] https://github.com/ImageMagick/ImageMagick/issues/1604

---
 MagickWand/operation.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/MagickWand/operation.c b/MagickWand/operation.c
index f53cf6dca7..2edf8d4b87 100644
--- a/MagickWand/operation.c
+++ b/MagickWand/operation.c
@@ -3868,7 +3868,10 @@ WandPrivate MagickBooleanType CLIListOperatorImages(MagickCLI *cli_wand,
           reconstruct_image=RemoveFirstImageFromList(&_images);
           /* FUTURE - produce Exception, rather than silent fail */
           if (reconstruct_image == (Image *) NULL)
-            break;
+            { 
+              image=DestroyImage(image);
+              break;
+            }
           metric=UndefinedErrorMetric;
           option=GetImageOption(_image_info,"metric");
           if (option != (const char *) NULL)
