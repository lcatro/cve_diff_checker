From aa9156006e88565e1f1a5f7cc088b18322d57536 Mon Sep 17 00:00:00 2001
From: Derick Rethans <github@derickrethans.nl>
Date: Mon, 14 Aug 2017 11:43:26 +0100
Subject: [PATCH] Fix parser rule for 'backof' and 'frontof'

---
 parse_date.re             | 4 ++--
 tests/files/frontof.parse | 3 +++
 2 files changed, 5 insertions(+), 2 deletions(-)
 create mode 100644 tests/files/frontof.parse

diff --git a/parse_date.re b/parse_date.re
index 2fef084..2246e98 100644
--- a/parse_date.re
+++ b/parse_date.re
@@ -947,8 +947,8 @@ isoweek          = year4 "-"? "W" weekofyear;
 exif             = year4 ":" monthlz ":" daylz " " hour24lz ":" minutelz ":" secondlz;
 firstdayof       = 'first day of';
 lastdayof        = 'last day of';
-backof           = 'back of ' hour24 space? meridian?;
-frontof          = 'front of ' hour24 space? meridian?;
+backof           = 'back of ' hour24 (space? meridian)?;
+frontof          = 'front of ' hour24 (space? meridian)?;
 
 /* Common Log Format: 10/Oct/2000:13:55:36 -0700 */
 clf              = day "/" monthabbr "/" year4 ":" hour24lz ":" minutelz ":" secondlz space tzcorrection;
diff --git a/tests/files/frontof.parse b/tests/files/frontof.parse
new file mode 100644
index 0000000..b2f57b0
--- /dev/null
+++ b/tests/files/frontof.parse
@@ -0,0 +1,3 @@
+TS: 0 | -99999--99999--99999 -1:45:00 | frONt of 0 0
+TS: 0 | -99999--99999--99999 15:45:00 | frONt of 4pm
+TS: 0 | -99999--99999--99999 15:45:00 | frONt of 4 pm
