From c2078a53543ed502efd968649fee1125e0eb549c Mon Sep 17 00:00:00 2001
From: Kyle Kelley <rgbkrk@gmail.com>
Date: Sun, 21 Jun 2015 23:12:34 -0500
Subject: [PATCH] Set content type in json_error to application/json

---
 IPython/html/base/handlers.py | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/IPython/html/base/handlers.py b/IPython/html/base/handlers.py
index 0eb7ac71992..40a9a630460 100644
--- a/IPython/html/base/handlers.py
+++ b/IPython/html/base/handlers.py
@@ -339,6 +339,7 @@ def wrapper(self, *args, **kwargs):
             message = e.log_message
             self.log.warn(message)
             self.set_status(e.status_code)
+            self.set_header('Content-Type', 'application/json')
             self.finish(json.dumps(dict(message=message)))
         except Exception:
             self.log.error("Unhandled error in API request", exc_info=True)
@@ -348,6 +349,7 @@ def wrapper(self, *args, **kwargs):
             self.set_status(status)
             tb_text = ''.join(traceback.format_exception(t, value, tb))
             reply = dict(message=message, traceback=tb_text)
+            self.set_header('Content-Type', 'application/json')
             self.finish(json.dumps(reply))
         else:
             return result
