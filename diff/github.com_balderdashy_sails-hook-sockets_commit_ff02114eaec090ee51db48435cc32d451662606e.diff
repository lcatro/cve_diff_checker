From ff02114eaec090ee51db48435cc32d451662606e Mon Sep 17 00:00:00 2001
From: Mike McNeil <git+mikermcneil@sailsjs.com>
Date: Sun, 23 Sep 2018 16:18:38 -0500
Subject: [PATCH] Define req.path for socket requests.

---
 lib/receive-incoming-sails-io-msg.js | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/lib/receive-incoming-sails-io-msg.js b/lib/receive-incoming-sails-io-msg.js
index 2ddca3b..5be5704 100644
--- a/lib/receive-incoming-sails-io-msg.js
+++ b/lib/receive-incoming-sails-io-msg.js
@@ -3,6 +3,7 @@
  */
 
 var util = require('util');
+var url = require('url');
 var _ = require('@sailshq/lodash');
 var semver = require('semver');
 var parseSdkMetadata = require('./parse-sdk-metadata');
@@ -105,6 +106,8 @@ module.exports = function ToReceiveIncomingSailsIOMsg(app) {
 
       url     : options.incomingSailsIOMsg.url,
 
+      path    : url.parse(options.incomingSailsIOMsg.url).pathname,
+
       method  : options.eventName,
 
       // Attached data becomes simulated HTTP body (`req.body`)
