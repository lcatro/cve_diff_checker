From 4fc3b404f718abb789f4ce4272c39c7a138c7a82 Mon Sep 17 00:00:00 2001
From: omphalos <omph.alos@yahoo.com>
Date: Thu, 15 Feb 2018 18:31:49 -0600
Subject: [PATCH] Fix canonicalization of directories

---
 crud-file-server.js | 2 +-
 package.json        | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/crud-file-server.js b/crud-file-server.js
index c6147c2..2aa4ea7 100644
--- a/crud-file-server.js
+++ b/crud-file-server.js
@@ -3,7 +3,7 @@ var fs = require('fs');
 // don't let users crawl up the folder structure by using a/../../../c/d
 var cleanUrl = function(url) { 
 	url = decodeURIComponent(url);
-	while(url.indexOf('..').length > 0) { url = url.replace('..', ''); }
+	while(url.indexOf('..') >= 0) { url = url.replace('..', ''); }
 	return url;
 };
 
diff --git a/package.json b/package.json
index 35ee0d3..0ad39f3 100644
--- a/package.json
+++ b/package.json
@@ -1,6 +1,6 @@
 {
   "name": "crud-file-server",
-  "version": "0.8.0",
+  "version": "0.9.0",
   "description": "file server supporting basic create, read, update, & delete for any kind of file",
   "bin": {
     "crud-file-server": "./bin/crud-file-server"
