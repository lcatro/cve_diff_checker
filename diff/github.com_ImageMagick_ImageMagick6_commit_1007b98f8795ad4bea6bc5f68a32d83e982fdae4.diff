From 1007b98f8795ad4bea6bc5f68a32d83e982fdae4 Mon Sep 17 00:00:00 2001
From: Cristy <urban-warrior@imagemagick.org>
Date: Tue, 1 May 2018 19:13:48 -0400
Subject: [PATCH] https://github.com/ImageMagick/ImageMagick/issues/1119

---
 coders/png.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/coders/png.c b/coders/png.c
index 31c0b8450e..3d6eb7db2d 100644
--- a/coders/png.c
+++ b/coders/png.c
@@ -4584,7 +4584,7 @@ static Image *ReadOneJNGImage(MngInfo *mng_info,
           (void) LogMagickEvent(CoderEvent,GetMagickModule(),
             "    Copying JDAT chunk data to color_blob.");
 
-        if (length != 0)
+        if ((length != 0) && (color_image != (Image *) NULL))
           {
             (void) WriteBlob(color_image,length,chunk);
             chunk=(unsigned char *) RelinquishMagickMemory(chunk);
