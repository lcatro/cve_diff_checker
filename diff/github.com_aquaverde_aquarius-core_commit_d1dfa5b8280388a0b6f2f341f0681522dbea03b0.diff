From d1dfa5b8280388a0b6f2f341f0681522dbea03b0 Mon Sep 17 00:00:00 2001
From: Tryption <45214041+Tryption@users.noreply.github.com>
Date: Fri, 15 Mar 2019 21:00:06 +0100
Subject: [PATCH] Fix CVE-2019-9734

---
 lib/log.php | 2 --
 1 file changed, 2 deletions(-)

diff --git a/lib/log.php b/lib/log.php
index a1cc77a..ee071a6 100644
--- a/lib/log.php
+++ b/lib/log.php
@@ -166,13 +166,11 @@ function log($level, $leveltext, $msg) {
             if ($msg instanceof Exception || $msg instanceof Error) {
                 $excmessage = method_exists($msg, 'getDetailMessage') ? $msg->getDetailMessage() : $msg->getMessage();
                 $logmessage = $leveltext.": ".$excmessage."\n".Log::prettybacktrace($msg->getTrace());
-                $showrequest = true;
             } else {
                 $logmessage = $leveltext.": ". print_r($msg,true)."\n";
                 // Generate a backtrace if it was requested or in severe cases
                 if ($level == Log::BACKTRACE || $level >= Log::FAIL) {
                     $backtrace = "\n".Log::prettybacktrace();
-                    $showrequest = true;
                 }
             }
 
