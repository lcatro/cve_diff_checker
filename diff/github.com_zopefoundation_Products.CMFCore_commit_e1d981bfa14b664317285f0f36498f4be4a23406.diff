From e1d981bfa14b664317285f0f36498f4be4a23406 Mon Sep 17 00:00:00 2001
From: vangheem <vangheem@gmail.com>
Date: Thu, 10 Sep 2015 11:16:42 -0500
Subject: [PATCH] Make sure RegistrationTool.addMember is not published

---
 Products/CMFCore/CHANGES.txt         |  3 ++-
 Products/CMFCore/RegistrationTool.py | 19 +++++++++++--------
 2 files changed, 13 insertions(+), 9 deletions(-)

diff --git a/Products/CMFCore/CHANGES.txt b/Products/CMFCore/CHANGES.txt
index 4b4e076..e38fc59 100644
--- a/Products/CMFCore/CHANGES.txt
+++ b/Products/CMFCore/CHANGES.txt
@@ -4,7 +4,8 @@ Products.CMFCore Changelog
 2.3.1 (unreleased)
 ------------------
 
-- Nothing changed yet.
+- Make sure RegistrationTool.addMember is not published
+  [vangheem]
 
 
 2.3.0 (2015-02-20)
diff --git a/Products/CMFCore/RegistrationTool.py b/Products/CMFCore/RegistrationTool.py
index d789957..f683073 100644
--- a/Products/CMFCore/RegistrationTool.py
+++ b/Products/CMFCore/RegistrationTool.py
@@ -132,14 +132,17 @@ def generatePassword(self):
     @postonly
     def addMember(self, id, password, roles=('Member',), domains='',
                   properties=None, REQUEST=None):
-        '''Creates a PortalMember and returns it. The properties argument
-        can be a mapping with additional member properties. Raises an
-        exception if the given id already exists, the password does not
-        comply with the policy in effect, or the authenticated user is not
-        allowed to grant one of the roles listed (where Member is a special
-        role that can always be granted); these conditions should be
-        detected before the fact so that a cleaner message can be printed.
-        '''
+        # XXX Do not make this a normal method comment. Doing so makes
+        # this method publishable
+
+        # Creates a PortalMember and returns it. The properties argument
+        # can be a mapping with additional member properties. Raises an
+        # exception if the given id already exists, the password does not
+        # comply with the policy in effect, or the authenticated user is not
+        # allowed to grant one of the roles listed (where Member is a special
+        # role that can always be granted); these conditions should be
+        # detected before the fact so that a cleaner message can be printed.
+
         if not self.isMemberIdAllowed(id):
             raise ValueError(_(u'The login name you selected is already in '
                                u'use or is not valid. Please choose another.'))
