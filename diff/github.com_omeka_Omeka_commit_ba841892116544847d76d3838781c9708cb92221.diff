From ba841892116544847d76d3838781c9708cb92221 Mon Sep 17 00:00:00 2001
From: John Flatness <john@zerocrates.org>
Date: Tue, 24 Apr 2018 16:03:22 -0400
Subject: [PATCH] Add escaping for tags on item form

---
 admin/themes/default/items/tag-form.php   | 2 +-
 admin/themes/default/javascripts/items.js | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/admin/themes/default/items/tag-form.php b/admin/themes/default/items/tag-form.php
index 399c4f6065..6fce6612f3 100644
--- a/admin/themes/default/items/tag-form.php
+++ b/admin/themes/default/items/tag-form.php
@@ -18,7 +18,7 @@
         <ul id="all-tags-list">
             <?php foreach( $tags as $tag ): ?>
                 <li>
-                    <?php echo '<span class="tag">' . $tag->name . '</span>'; 
+                    <?php echo '<span class="tag">' . html_escape($tag->name) . '</span>';
                           echo '<span class="undo-remove-tag"><a href="#">' . __('Undo') . '</a></span>';
                           echo '<span class="remove-tag"><a href="#">' . __('Remove') . '</a></span>'; ?>
                 </li>
diff --git a/admin/themes/default/javascripts/items.js b/admin/themes/default/javascripts/items.js
index 16332d593f..806f1dcdff 100644
--- a/admin/themes/default/javascripts/items.js
+++ b/admin/themes/default/javascripts/items.js
@@ -102,7 +102,7 @@ Omeka.Items = {};
 
         var undoButton = $('<span class="undo-remove-tag"><a href="#">Undo</a></span>').appendTo(tagLi);
         var deleteButton = $('<span class="remove-tag"><a href="#">Remove</a></span>').appendTo(tagLi);
-        tagLi.prepend('<span class="tag">' + tag + '</span>');
+        $('<span></span>', {'class': 'tag', 'text': tag}).appendTo(tagLi);
 
         if($('#all-tags-list').length != 0) {
             $('#all-tags-list').append(tagLi);
