From 19ade858c430ab13eb562764a870ac9f8506f8dd Mon Sep 17 00:00:00 2001
From: Wei Tang <wei@that.world>
Date: Tue, 11 May 2021 17:33:30 +0200
Subject: [PATCH] Skip setting memory value if the value vec is empty

---
 core/src/memory.rs | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/core/src/memory.rs b/core/src/memory.rs
index 3d209be0..a2266cf6 100644
--- a/core/src/memory.rs
+++ b/core/src/memory.rs
@@ -105,6 +105,10 @@ impl Memory {
 		value: &[u8],
 		target_size: Option<usize>
 	) -> Result<(), ExitFatal> {
+		if value.is_empty() {
+			return Ok(())
+		}
+		
 		let target_size = target_size.unwrap_or(value.len());
 
 		if offset.checked_add(target_size)
