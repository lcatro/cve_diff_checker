From a2e295094a96a2bd662f2494f18d9bbe269fa169 Mon Sep 17 00:00:00 2001
From: Pierre RAMBAUD <pierre.rambaud@prestashop.com>
Date: Thu, 14 May 2020 15:06:27 +0200
Subject: [PATCH 1/2] Escape $confirm variable in smarty context

---
 .../helpers/list/list_action_delete.tpl       | 50 ++++++++++---------
 1 file changed, 26 insertions(+), 24 deletions(-)

diff --git a/admin-dev/themes/default/template/helpers/list/list_action_delete.tpl b/admin-dev/themes/default/template/helpers/list/list_action_delete.tpl
index efafee8b1722..336df5437977 100644
--- a/admin-dev/themes/default/template/helpers/list/list_action_delete.tpl
+++ b/admin-dev/themes/default/template/helpers/list/list_action_delete.tpl
@@ -1,27 +1,29 @@
 {**
- * 2007-2019 PrestaShop and Contributors
- *
- * NOTICE OF LICENSE
- *
- * This source file is subject to the Open Software License (OSL 3.0)
- * that is bundled with this package in the file LICENSE.txt.
- * It is also available through the world-wide-web at this URL:
- * https://opensource.org/licenses/OSL-3.0
- * If you did not receive a copy of the license and are unable to
- * obtain it through the world-wide-web, please send an email
- * to license@prestashop.com so we can send you a copy immediately.
- *
- * DISCLAIMER
- *
- * Do not edit or add to this file if you wish to upgrade PrestaShop to newer
- * versions in the future. If you wish to customize PrestaShop for your
- * needs please refer to https://www.prestashop.com for more information.
- *
- * @author    PrestaShop SA <contact@prestashop.com>
- * @copyright 2007-2019 PrestaShop SA and Contributors
- * @license   https://opensource.org/licenses/OSL-3.0 Open Software License (OSL 3.0)
- * International Registered Trademark & Property of PrestaShop SA
- *}
-<a href="{$href|escape:'html':'UTF-8'}"{if isset($confirm)} onclick="if (confirm('{$confirm}')){ldelim}return true;{rdelim}else{ldelim}event.stopPropagation(); event.preventDefault();{rdelim};"{/if} title="{$action|escape:'html':'UTF-8'}" class="delete">
+  * 2007-2020 PrestaShop SA and Contributors
+  *
+  * NOTICE OF LICENSE
+  *
+  * This source file is subject to the Open Software License (OSL 3.0)
+  * that is bundled with this package in the file LICENSE.txt.
+  * It is also available through the world-wide-web at this URL:
+  * https://opensource.org/licenses/OSL-3.0
+  * If you did not receive a copy of the license and are unable to
+  * obtain it through the world-wide-web, please send an email
+  * to license@prestashop.com so we can send you a copy immediately.
+  *
+  * DISCLAIMER
+  *
+  * Do not edit or add to this file if you wish to upgrade PrestaShop to newer
+  * versions in the future. If you wish to customize PrestaShop for your
+  * needs please refer to https://www.prestashop.com for more information.
+  *
+  * @author    PrestaShop SA <contact@prestashop.com>
+  * @copyright 2007-2020 PrestaShop SA and Contributors
+  * @license   https://opensource.org/licenses/OSL-3.0 Open Software License (OSL 3.0)
+  * International Registered Trademark & Property of PrestaShop SA
+  *}
+<a href="#"
+  title="{$action|escape:'html':'UTF-8'}"
+  onclick="{if $confirm}confirm_link('', '{$confirm|escape:'html':'UTF-8'}', '{l s='Yes' d='Admin.Global'}', '{l s='No' d='Admin.Global'}', '{$href|escape:'html':'UTF-8'}', '#'){else}event.stopPropagation();event.preventDefault(){/if}">
 	<i class="icon-trash"></i> {$action|escape:'html':'UTF-8'}
 </a>

From 4283b2e9fd915ce23f7b62102a39ef5515b81a1a Mon Sep 17 00:00:00 2001
From: GoT <PierreRambaud@users.noreply.github.com>
Date: Thu, 25 Jun 2020 15:10:15 +0200
Subject: [PATCH 2/2] Update
 admin-dev/themes/default/template/helpers/list/list_action_delete.tpl

Co-authored-by: Progi1984 <franck.lefevre@prestashop.com>
---
 .../themes/default/template/helpers/list/list_action_delete.tpl  | 1 +
 1 file changed, 1 insertion(+)

diff --git a/admin-dev/themes/default/template/helpers/list/list_action_delete.tpl b/admin-dev/themes/default/template/helpers/list/list_action_delete.tpl
index 336df5437977..8d2a6ebf12c0 100644
--- a/admin-dev/themes/default/template/helpers/list/list_action_delete.tpl
+++ b/admin-dev/themes/default/template/helpers/list/list_action_delete.tpl
@@ -24,6 +24,7 @@
   *}
 <a href="#"
   title="{$action|escape:'html':'UTF-8'}"
+  class="delete"
   onclick="{if $confirm}confirm_link('', '{$confirm|escape:'html':'UTF-8'}', '{l s='Yes' d='Admin.Global'}', '{l s='No' d='Admin.Global'}', '{$href|escape:'html':'UTF-8'}', '#'){else}event.stopPropagation();event.preventDefault(){/if}">
 	<i class="icon-trash"></i> {$action|escape:'html':'UTF-8'}
 </a>
