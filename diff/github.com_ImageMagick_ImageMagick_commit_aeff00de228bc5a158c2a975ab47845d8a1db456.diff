From aeff00de228bc5a158c2a975ab47845d8a1db456 Mon Sep 17 00:00:00 2001
From: Cristy <urban-warrior@imagemagick.org>
Date: Sat, 10 Dec 2016 19:51:17 -0500
Subject: [PATCH] Fix a small memory leak

---
 ChangeLog        | 2 +-
 coders/caption.c | 2 +-
 coders/label.c   | 2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/ChangeLog b/ChangeLog
index 454a96d846..352f89c671 100644
--- a/ChangeLog
+++ b/ChangeLog
@@ -1,5 +1,5 @@
 2016-12-10  6.9.6-8 Cristy  <quetzlzacatenango@image...>
-  * Release ImageMagick version 6.9.6-8, GIT revision 11218:2f8c6dd:20161210.
+  * Release ImageMagick version 6.9.6-8, GIT revision 11219:11d48fe:20161210.
 
 2016-12-07  6.9.6-8 Cristy  <quetzlzacatenango@image...>
   * Set colorspace to sRGB if -append has non-homogenous colorspaces (reference
diff --git a/coders/caption.c b/coders/caption.c
index 728fc5c8aa..350bed6eb4 100644
--- a/coders/caption.c
+++ b/coders/caption.c
@@ -275,7 +275,7 @@ static Image *ReadCAPTIONImage(const ImageInfo *image_info,
     draw_info->direction == RightToLeftDirection ? image->columns-
     metrics.bounds.x2 : -metrics.bounds.x1,0.0),draw_info->gravity ==
     UndefinedGravity ? metrics.ascent : 0.0);
-  draw_info->geometry=AcquireString(geometry);
+  (void) CloneString(&draw_info->geometry,geometry);
   status=AnnotateImage(image,draw_info);
   if (image_info->pointsize == 0.0)
     { 
diff --git a/coders/label.c b/coders/label.c
index c5fef43ac7..876354e276 100644
--- a/coders/label.c
+++ b/coders/label.c
@@ -237,7 +237,7 @@ static Image *ReadLABELImage(const ImageInfo *image_info,
     draw_info->direction == RightToLeftDirection ? image->columns-
     metrics.bounds.x2 : 0.0,draw_info->gravity == UndefinedGravity ?
     metrics.ascent : 0.0);
-  draw_info->geometry=AcquireString(geometry);
+  (void) CloneString(&draw_info->geometry,geometry);
   status=AnnotateImage(image,draw_info);
   if (image_info->pointsize == 0.0)
     {
