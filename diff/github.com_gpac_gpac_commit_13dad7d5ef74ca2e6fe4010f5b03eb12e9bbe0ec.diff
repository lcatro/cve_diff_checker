From 13dad7d5ef74ca2e6fe4010f5b03eb12e9bbe0ec Mon Sep 17 00:00:00 2001
From: jeanlf <jeanlf@gpac.io>
Date: Mon, 29 Mar 2021 09:21:51 +0200
Subject: [PATCH] fixed #1719

---
 src/filters/reframe_av1.c | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/src/filters/reframe_av1.c b/src/filters/reframe_av1.c
index 591a826a9..c8b402c8a 100644
--- a/src/filters/reframe_av1.c
+++ b/src/filters/reframe_av1.c
@@ -739,6 +739,9 @@ static GF_Err av1dmx_parse_flush_sample(GF_Filter *filter, GF_AV1DmxCtx *ctx)
 	GF_FilterPacket *pck;
 	u8 *output;
 
+	if (!ctx->opid)
+		return GF_NON_COMPLIANT_BITSTREAM;
+		
 	gf_bs_get_content_no_truncate(ctx->state.bs, &ctx->state.frame_obus, &pck_size, &ctx->state.frame_obus_alloc);
 
 	if (!pck_size) {
