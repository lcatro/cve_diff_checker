From ab89584ab32b98a0af3d711e3f508a1d048147d2 Mon Sep 17 00:00:00 2001
From: Brian Kephart <briantkephart@gmail.com>
Date: Tue, 12 Oct 2021 00:00:07 -0500
Subject: [PATCH] Fix error when uploading an SVG with no size

---
 app/uploaders/camaleon_cms_local_uploader.rb | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/app/uploaders/camaleon_cms_local_uploader.rb b/app/uploaders/camaleon_cms_local_uploader.rb
index ae966dc49..cc865b13d 100644
--- a/app/uploaders/camaleon_cms_local_uploader.rb
+++ b/app/uploaders/camaleon_cms_local_uploader.rb
@@ -52,7 +52,7 @@ def file_parse(key)
     if res['file_type'] == 'image'
       res["thumb"].sub! '.svg', '.jpg'
       im = MiniMagick::Image.open(file_path)
-      res['dimension'] = "#{im[:width]}x#{im[:height]}"
+      res['dimension'] = "#{im[:width]}x#{im[:height]}" rescue "0x0" # Malformed SVGs raise an exception here.
     end
     res
   end
