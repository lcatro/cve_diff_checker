From b953f63307c4a83fa4615a4863e3fb250205cd98 Mon Sep 17 00:00:00 2001
From: Peter Szabo <pts@fazekas.hu>
Date: Thu, 18 Jul 2019 17:09:40 +0200
Subject: [PATCH] improved error reporting for 0-width in TGA loading; this
 fixes https://github.com/pts/sam2p/issues/66

---
 input-tga.ci | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/input-tga.ci b/input-tga.ci
index 6185527..be6515d 100644
--- a/input-tga.ci
+++ b/input-tga.ci
@@ -452,7 +452,7 @@ ReadImage (FILE              *fp,
 	  pelbytes = 3;
 
   wh = (unsigned)width * height;
-  if (wh / width != height) {
+  if (width != 0 && wh / width != height) {
    idl_error:
     FATALP("TGA: image dimensions too large");
   }
