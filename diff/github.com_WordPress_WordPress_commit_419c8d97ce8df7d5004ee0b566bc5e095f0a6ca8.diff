From 419c8d97ce8df7d5004ee0b566bc5e095f0a6ca8 Mon Sep 17 00:00:00 2001
From: Dominik Schilling <dominikschilling+git@gmail.com>
Date: Mon, 6 Mar 2017 11:42:40 +0000
Subject: [PATCH] Embeds: URL encode YouTube video IDs for broader
 compatibility. Built from https://develop.svn.wordpress.org/trunk@40160

git-svn-id: http://core.svn.wordpress.org/trunk@40099 1a063a9b-81f0-0310-95a4-ce76da25c4cd
---
 wp-includes/embed.php   | 2 +-
 wp-includes/version.php | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/wp-includes/embed.php b/wp-includes/embed.php
index ddd5dd988c80..b987649f527a 100644
--- a/wp-includes/embed.php
+++ b/wp-includes/embed.php
@@ -226,7 +226,7 @@ function wp_maybe_load_embeds() {
  */
 function wp_embed_handler_youtube( $matches, $attr, $url, $rawattr ) {
 	global $wp_embed;
-	$embed = $wp_embed->autoembed( "https://youtube.com/watch?v={$matches[2]}" );
+	$embed = $wp_embed->autoembed( sprintf( "https://youtube.com/watch?v=%s", urlencode( $matches[2] ) ) );
 
 	/**
 	 * Filters the YoutTube embed output.
diff --git a/wp-includes/version.php b/wp-includes/version.php
index a54c0193e7da..656a2009194e 100644
--- a/wp-includes/version.php
+++ b/wp-includes/version.php
@@ -4,7 +4,7 @@
  *
  * @global string $wp_version
  */
-$wp_version = '4.8-alpha-40148';
+$wp_version = '4.8-alpha-40160';
 
 /**
  * Holds the WordPress DB revision, increments when changes are made to the WordPress DB schema.
