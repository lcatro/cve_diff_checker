From 5f4087aabb5d03c42738b320af0fc60e9df4d1f7 Mon Sep 17 00:00:00 2001
From: Brendan Cunningham <brendan.cunningham@intel.com>
Date: Mon, 21 Sep 2015 17:16:46 -0400
Subject: [PATCH] Fix scripts that use well-known temp files.

---
 Esm/ib/src/linux/startup/fm_config/config_diff.sh     | 5 +++--
 Esm/ib/src/linux/startup/fm_config/config_generate.sh | 3 ++-
 2 files changed, 5 insertions(+), 3 deletions(-)

diff --git a/Esm/ib/src/linux/startup/fm_config/config_diff.sh b/Esm/ib/src/linux/startup/fm_config/config_diff.sh
index 4e5d713..b8443f2 100755
--- a/Esm/ib/src/linux/startup/fm_config/config_diff.sh
+++ b/Esm/ib/src/linux/startup/fm_config/config_diff.sh
@@ -30,9 +30,10 @@
 
 # [ICS VERSION STRING: unknown]
 
-TEMP1=/tmp/smdiffa$$
-TEMP2=/tmp/smdiffb$$
+TEMP1=`mktemp`
+TEMP2=`mktemp`
 trap "rm -f $TEMP1 $TEMP2; exit 1" SIGHUP SIGTERM SIGINT
+trap "rm -f $TEMP1 $TEMP2" EXIT
 
 Usage()
 {
diff --git a/Esm/ib/src/linux/startup/fm_config/config_generate.sh b/Esm/ib/src/linux/startup/fm_config/config_generate.sh
index 6c27672..c9db1f5 100755
--- a/Esm/ib/src/linux/startup/fm_config/config_generate.sh
+++ b/Esm/ib/src/linux/startup/fm_config/config_generate.sh
@@ -30,8 +30,9 @@
 
 # [ICS VERSION STRING: unknown]
 
-TEMP=/tmp/smgen$$
+TEMP=`mktemp`
 trap "rm -f $TEMP; exit 1" SIGHUP SIGTERM SIGINT
+trap "rm -f $TEMP" EXIT
 
 Usage()
 {
