From 4d11f77aa7fd3e64cfa80af89d92567ab9e8e6fa Mon Sep 17 00:00:00 2001
From: Alexander Larsson <alexl@redhat.com>
Date: Mon, 10 Jan 2022 13:29:44 +0100
Subject: [PATCH] manpages: Document the new details of --nofilesystem
 behaviour.

---
 doc/flatpak-build-finish.xml | 7 +++++++
 doc/flatpak-build.xml        | 7 +++++++
 doc/flatpak-override.xml     | 7 +++++++
 doc/flatpak-run.xml          | 8 ++++++++
 4 files changed, 29 insertions(+)

diff --git a/doc/flatpak-build-finish.xml b/doc/flatpak-build-finish.xml
index 81a72452d..95ba5d0cd 100644
--- a/doc/flatpak-build-finish.xml
+++ b/doc/flatpak-build-finish.xml
@@ -258,6 +258,13 @@
                     xdg-music, xdg-pictures, xdg-public-share, xdg-templates, xdg-videos,
                     an absolute path, or a homedir-relative path like ~/dir.
                     This option can be used multiple times.
+                </para><para>
+                    In general, "--nofilesystem=PATH" will remove access to a specific path if exactly that path
+                    was previously granted. However, as a special case, "--nofilesystem=home"  will remove access to all
+                    previously granted locations inside the homedir as well, such as "home/some-dir", or "xdg-download",
+                    and "--nofilesystem=host" will remove access to all previously granted locations.
+                    Note: absolute paths that happen to be inside the current users home directory are not considered for
+                    this special case.
                 </para></listitem>
             </varlistentry>
 
diff --git a/doc/flatpak-build.xml b/doc/flatpak-build.xml
index a48e2acdf..2cc0cc6d0 100644
--- a/doc/flatpak-build.xml
+++ b/doc/flatpak-build.xml
@@ -247,6 +247,13 @@
                     xdg-music, xdg-pictures, xdg-public-share, xdg-templates, xdg-videos,
                     an absolute path, or a homedir-relative path like ~/dir.
                     This option can be used multiple times.
+                </para><para>
+                    In general, "--nofilesystem=PATH" will remove access to a specific path if exactly that path
+                    was previously granted. However, as a special case, "--nofilesystem=home" will remove access to all
+                    previously granted locations inside the homedir as well, such as "home/some-dir", or "xdg-download",
+                    and "--nofilesystem=host" will remove access to all previously granted locations.
+                    Note: absolute paths that happen to be inside the current users home directory are not considered for
+                    this special case.
                 </para></listitem>
             </varlistentry>
 
diff --git a/doc/flatpak-override.xml b/doc/flatpak-override.xml
index e2768a429..0695b32f5 100644
--- a/doc/flatpak-override.xml
+++ b/doc/flatpak-override.xml
@@ -230,6 +230,13 @@
                     xdg-music, xdg-pictures, xdg-public-share, xdg-templates, xdg-videos,
                     an absolute path, or a homedir-relative path like ~/dir.
                     This option can be used multiple times.
+                </para><para>
+                    In general, "--nofilesystem=PATH" will remove access to a specific path if exactly that path
+                    was previously granted. However, as a special case, "--nofilesystem=home" will remove access to all
+                    previously granted locations inside the homedir as well, such as "home/some-dir", or "xdg-download",
+                    and "--nofilesystem=host" will remove access to all previously granted locations.
+                    Note: absolute paths that happen to be inside the current users home directory are not considered for
+                    this special case.
                 </para></listitem>
             </varlistentry>
 
diff --git a/doc/flatpak-run.xml b/doc/flatpak-run.xml
index 0cdd6ed45..803fae2e7 100644
--- a/doc/flatpak-run.xml
+++ b/doc/flatpak-run.xml
@@ -381,7 +381,15 @@
                     xdg-music, xdg-pictures, xdg-public-share, xdg-templates, xdg-videos,
                     an absolute path, or a homedir-relative path like ~/dir.
                     This option can be used multiple times.
+                </para><para>
+                    In general, "--nofilesystem=PATH" will remove access to a specific path if exactly that path
+                    was previously granted. However, as a special case, "--nofilesystem=home" will remove access to all
+                    previously granted locations inside the homedir as well, such as "home/some-dir", or "xdg-download",
+                    and "--nofilesystem=host" will remove access to all previously granted locations.
+                    Note: absolute paths that happen to be inside the current users home directory are not considered for
+                    this special case.
                 </para></listitem>
+
             </varlistentry>
 
             <varlistentry>
