From 45c6bfa86f6e57731b153baca9e0b41a1cc699e3 Mon Sep 17 00:00:00 2001
From: Adam Stankiewicz <sheerun@sher.pl>
Date: Wed, 23 Jan 2019 22:14:48 +0100
Subject: [PATCH] Fix .tar.gz extract vulnerability

---
 lib/util/extract.js | 4 ++--
 package.json        | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/lib/util/extract.js b/lib/util/extract.js
index 7ba285c14..ac04f062c 100644
--- a/lib/util/extract.js
+++ b/lib/util/extract.js
@@ -130,8 +130,8 @@ function extractGz(archive, dst) {
     return deferred.promise;
 }
 
-function isSymlink(entry) {
-    return entry.type === 'SymbolicLink';
+function isSymlink(_, entry) {
+    return entry.type === 'symlink';
 }
 
 function filterSymlinks(entry) {
diff --git a/package.json b/package.json
index 4dd1bede6..57820e547 100644
--- a/package.json
+++ b/package.json
@@ -94,7 +94,7 @@
     "test": "grunt test",
     "ci": "grunt travis",
     "coveralls": "coveralls",
-    "prepublish": "in-publish && echo 'You need to use \"grunt publish\" to publish bower' && false || not-in-publish",
+    "prepublishOnly": "in-publish && echo 'You need to use \"grunt publish\" to publish bower' && false || not-in-publish",
     "format": "prettier --write --single-quote --tab-width 4 '**/*.js'",
     "precommit": "lint-staged"
   },
