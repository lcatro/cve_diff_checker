From 1dc25f2bea6ea522dbac1512b5563c4746d539c3 Mon Sep 17 00:00:00 2001
From: Ravi Patel <ravi15@outlook.com>
Date: Thu, 31 Oct 2019 11:32:24 +0530
Subject: [PATCH] Fixed an XML external entity (XXE) vulnerability.

---
 AutoUpdater.NET/AutoUpdater.cs                        | 3 +--
 AutoUpdater.NET/Properties/AssemblyInfo.cs            | 4 ++--
 AutoUpdater.NET/build/Autoupdater.NET.Official.nuspec | 2 +-
 appveyor.yml                                          | 4 ++--
 4 files changed, 6 insertions(+), 7 deletions(-)

diff --git a/AutoUpdater.NET/AutoUpdater.cs b/AutoUpdater.NET/AutoUpdater.cs
index c8a6501..52c979d 100644
--- a/AutoUpdater.NET/AutoUpdater.cs
+++ b/AutoUpdater.NET/AutoUpdater.cs
@@ -462,8 +462,7 @@ private static void BackgroundWorkerDoWork(object sender, DoWorkEventArgs e)
                     }
                     else
                     {
-                        XmlDocument receivedAppCastDocument = new XmlDocument();
-
+                        XmlDocument receivedAppCastDocument = new XmlDocument {XmlResolver = null};
                         try
                         {
                             receivedAppCastDocument.Load(appCastStream);
diff --git a/AutoUpdater.NET/Properties/AssemblyInfo.cs b/AutoUpdater.NET/Properties/AssemblyInfo.cs
index b466825..c02b883 100644
--- a/AutoUpdater.NET/Properties/AssemblyInfo.cs
+++ b/AutoUpdater.NET/Properties/AssemblyInfo.cs
@@ -32,6 +32,6 @@
 // You can specify all the values or you can default the Build and Revision Numbers 
 // by using the '*' as shown below:
 // [assembly: AssemblyVersion("1.0.*")]
-[assembly: AssemblyVersion("1.5.7.0")]
-[assembly: AssemblyFileVersion("1.5.7.0")]
+[assembly: AssemblyVersion("1.5.8.0")]
+[assembly: AssemblyFileVersion("1.5.8.0")]
 [assembly: NeutralResourcesLanguageAttribute("en")]
diff --git a/AutoUpdater.NET/build/Autoupdater.NET.Official.nuspec b/AutoUpdater.NET/build/Autoupdater.NET.Official.nuspec
index 21b0013..6b97b7e 100644
--- a/AutoUpdater.NET/build/Autoupdater.NET.Official.nuspec
+++ b/AutoUpdater.NET/build/Autoupdater.NET.Official.nuspec
@@ -2,7 +2,7 @@
 <package xmlns="http://schemas.microsoft.com/packaging/2011/08/nuspec.xsd">
     <metadata>
         <id>Autoupdater.NET.Official</id>
-        <version>1.5.7</version>
+        <version>1.5.8</version>
         <title>AutoUpdater.NET</title>
         <authors>RBSoft</authors>
         <owners>RBSoft</owners>
diff --git a/appveyor.yml b/appveyor.yml
index fe4a071..724235b 100644
--- a/appveyor.yml
+++ b/appveyor.yml
@@ -1,6 +1,6 @@
-version: 1.5.7.{build}
+version: 1.5.8.{build}
 environment:
-  my_version: 1.5.7
+  my_version: 1.5.8
   my_secret:
     secure: vbPRaZLQYpGPr4BrZZ4p6TofpSZMud+FKtlpqjgO8aA=
 skip_branch_with_pr: true
