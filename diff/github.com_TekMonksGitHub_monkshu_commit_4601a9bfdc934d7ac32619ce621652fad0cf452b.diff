From 4601a9bfdc934d7ac32619ce621652fad0cf452b Mon Sep 17 00:00:00 2001
From: TekMonksGitHub <rvkapoor@tekmonks.com>
Date: Sat, 31 Jul 2021 14:01:35 +0900
Subject: [PATCH] Fix for GHSA-hcpx-66hq-7g4x. Cross-site reflection

---
 frontend/server/server.js | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/frontend/server/server.js b/frontend/server/server.js
index 2895e77..3bf2bef 100644
--- a/frontend/server/server.js
+++ b/frontend/server/server.js
@@ -131,12 +131,12 @@ function _sendFile(fileRequested, req, res, stats) {
 			if (conf.enableGZIPEncoding && acceptEncodingHeader.includes("gzip") && mime && (!Array.isArray(mime) || Array.isArray(mime) && mime[1]) ) {
 				res.writeHead(200, _getServerHeaders({ "Content-Type": Array.isArray(mime)?mime[0]:mime, "Content-Encoding": "gzip" }, stats));
 				rawStream.pipe(zlib.createGzip()).pipe(res)
-				.on("error", err => _sendError(req, res, 500, `500: ${req.url}, Server error: ${err}`))
+				.on("error", err => _sendError(req, res, 500, `500: Error: ${err}`))
 				.on("end", _ => res.end());
 			} else {
 				res.writeHead(200, mime ? _getServerHeaders({"Content-Type":Array.isArray(mime)?mime[0]:mime}, stats) : _getServerHeaders({}, stats));
 				rawStream.on("data", chunk => res.write(chunk, "binary"))
-					.on("error", err => _sendError(req, res, 500, `500: ${req.url}, Server error: ${err}`))
+					.on("error", err => _sendError(req, res, 500, `500: Error: ${err}`))
 					.on("end", _ => res.end());
 			}
 		}
