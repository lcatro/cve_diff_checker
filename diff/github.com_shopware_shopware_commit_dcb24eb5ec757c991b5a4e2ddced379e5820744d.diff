From dcb24eb5ec757c991b5a4e2ddced379e5820744d Mon Sep 17 00:00:00 2001
From: Philip Gatzka <p.gatzka@shopware.com>
Date: Thu, 15 Apr 2021 15:25:37 +0200
Subject: [PATCH] SW-26001 - Adjust error controller

---
 engine/Shopware/Controllers/Frontend/Error.php | 5 +----
 1 file changed, 1 insertion(+), 4 deletions(-)

diff --git a/engine/Shopware/Controllers/Frontend/Error.php b/engine/Shopware/Controllers/Frontend/Error.php
index af3e6bd42bc..be864f54dc5 100644
--- a/engine/Shopware/Controllers/Frontend/Error.php
+++ b/engine/Shopware/Controllers/Frontend/Error.php
@@ -50,10 +50,7 @@ public function preDispatch()
             $this->enableBackendTheme();
         }
 
-        if (strpos($this->Request()->getHeader('Content-Type'), 'application/json') === 0) {
-            $this->Front()->Plugins()->Json()->setRenderer();
-            $this->View()->assign('success', false);
-        } elseif ($this->Request()->isXmlHttpRequest() || !Shopware()->Container()->initialized('db')) {
+        if ($this->Request()->isXmlHttpRequest() || !Shopware()->Container()->initialized('db')) {
             $this->View()->loadTemplate($templateModule . '/error/exception.tpl');
         } elseif (isset($_ENV['SHELL']) || PHP_SAPI === 'cli') {
             $this->View()->loadTemplate($templateModule . '/error/cli.tpl');
