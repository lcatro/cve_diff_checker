From b2db1e24d0e52b961b5c3b3329b6ee717cac53a2 Mon Sep 17 00:00:00 2001
From: votdev <votdev@gmx.de>
Date: Fri, 17 Mar 2017 11:26:15 +0100
Subject: [PATCH] Improve foreign content handling.

---
 deb/openmediavault-clamav/debian/changelog    |  6 ++++
 deb/openmediavault-clamav/debian/control      |  2 +-
 .../omv/module/admin/service/clamav/Jobs.js   |  2 ++
 .../debian/changelog                          |  6 ++++
 deb/openmediavault-iscsitarget/debian/control |  2 +-
 .../admin/service/iscsitarget/Targets.js      |  8 +++++
 deb/openmediavault-netatalk/debian/changelog  |  6 ++++
 deb/openmediavault-netatalk/debian/control    |  2 +-
 .../js/omv/module/admin/service/afp/Shares.js |  2 ++
 deb/openmediavault-route/debian/changelog     |  6 ++++
 deb/openmediavault-route/debian/control       |  2 +-
 .../omv/module/admin/system/network/Route.js  |  3 ++
 deb/openmediavault-usbbackup/debian/changelog |  6 ++++
 deb/openmediavault-usbbackup/debian/control   |  2 +-
 .../module/admin/service/usbbackup/Jobs.js    |  3 ++
 deb/openmediavault/debian/changelog           |  6 ++++
 .../openmediavault/js/omv/grid/column/Text.js | 35 +++++++++++++++++++
 .../omv/module/admin/privilege/group/Group.js |  3 ++
 .../privilege/sharedfolder/SharedFolder.js    |  4 +++
 .../omv/module/admin/privilege/user/User.js   |  4 +++
 .../js/omv/module/admin/service/ftp/Shares.js |  2 ++
 .../js/omv/module/admin/service/nfs/Shares.js |  3 ++
 .../js/omv/module/admin/service/rsync/Jobs.js |  3 ++
 .../module/admin/service/rsyncd/Modules.js    |  4 +++
 .../js/omv/module/admin/service/smb/Shares.js |  2 ++
 .../admin/storage/smart/ScheduledJobs.js      |  5 +++
 .../module/admin/system/certificate/Ssh.js    |  1 +
 .../module/admin/system/certificate/Ssl.js    |  2 ++
 .../js/omv/module/admin/system/cron/Cron.js   |  3 ++
 .../module/admin/system/network/Firewall.js   |  2 ++
 .../module/admin/system/network/Interfaces.js |  1 +
 .../system/powermanagement/ScheduledJobs.js   |  1 +
 .../js/omv/window/MessageBox.js               |  5 ++-
 .../js/omv/workspace/grid/Panel.js            |  1 +
 34 files changed, 137 insertions(+), 8 deletions(-)
 create mode 100644 deb/openmediavault/var/www/openmediavault/js/omv/grid/column/Text.js

diff --git a/deb/openmediavault-clamav/debian/changelog b/deb/openmediavault-clamav/debian/changelog
index 8fdd59c5e2..7f6d5f9007 100644
--- a/deb/openmediavault-clamav/debian/changelog
+++ b/deb/openmediavault-clamav/debian/changelog
@@ -1,3 +1,9 @@
+openmediavault-clamav (3.2.11) stable; urgency=low
+
+  * Various improvements.
+
+ -- Volker Theile <volker.theile@openmediavault.org>  Fri, 17 Mar 2017 11:08:11 +0100
+
 openmediavault-clamav (3.2.10) stable; urgency=low
 
   * Various improvements.
diff --git a/deb/openmediavault-clamav/debian/control b/deb/openmediavault-clamav/debian/control
index f779e8b9c4..65859f843e 100644
--- a/deb/openmediavault-clamav/debian/control
+++ b/deb/openmediavault-clamav/debian/control
@@ -9,7 +9,7 @@ Homepage: http://www.openmediavault.org
 
 Package: openmediavault-clamav
 Architecture: all
-Depends: openmediavault (>= 3.0.60), clamav-daemon, clamav-freshclam,
+Depends: openmediavault (>= 3.0.67), clamav-daemon, clamav-freshclam,
  clamdscan, init-system-helpers
 Priority: optional
 Description: OpenMediaVault ClamAV plugin
diff --git a/deb/openmediavault-clamav/var/www/openmediavault/js/omv/module/admin/service/clamav/Jobs.js b/deb/openmediavault-clamav/var/www/openmediavault/js/omv/module/admin/service/clamav/Jobs.js
index 43d717b0b2..1e4f7205fa 100644
--- a/deb/openmediavault-clamav/var/www/openmediavault/js/omv/module/admin/service/clamav/Jobs.js
+++ b/deb/openmediavault-clamav/var/www/openmediavault/js/omv/module/admin/service/clamav/Jobs.js
@@ -271,6 +271,7 @@ Ext.define("OMV.module.admin.service.clamav.Jobs", {
 		resizable: false,
 		iconCls:  Ext.baseCSSPrefix + "grid-cell-booleaniconcolumn-switch"
 	},{
+		xtype: "textcolumn",
 		text: _("Shared folder"),
 		sortable: true,
 		dataIndex: "sharedfoldername",
@@ -329,6 +330,7 @@ Ext.define("OMV.module.admin.service.clamav.Jobs", {
 		stateId: "dayofweek",
 		renderer: OMV.util.Format.arrayRenderer(Date.mapDayOfWeek)
 	},{
+		xtype: "textcolumn",
 		text: _("Comment"),
 		sortable: true,
 		dataIndex: "comment",
diff --git a/deb/openmediavault-iscsitarget/debian/changelog b/deb/openmediavault-iscsitarget/debian/changelog
index 4729d5287f..c672f35278 100644
--- a/deb/openmediavault-iscsitarget/debian/changelog
+++ b/deb/openmediavault-iscsitarget/debian/changelog
@@ -1,3 +1,9 @@
+openmediavault-iscsitarget (3.1.6) stable; urgency=low
+
+  * Various improvements.
+
+ -- Volker Theile <volker.theile@openmediavault.org>  Fri, 17 Mar 2017 11:11:10 +0100
+
 openmediavault-iscsitarget (3.1.5) stable; urgency=low
 
   * Fix first installation bug.
diff --git a/deb/openmediavault-iscsitarget/debian/control b/deb/openmediavault-iscsitarget/debian/control
index a5ae5c6e71..f581da4d78 100644
--- a/deb/openmediavault-iscsitarget/debian/control
+++ b/deb/openmediavault-iscsitarget/debian/control
@@ -9,7 +9,7 @@ Homepage: http://www.openmediavault.org
 
 Package: openmediavault-iscsitarget
 Architecture: all
-Depends: openmediavault (>= 3.0.60), iscsitarget, iscsitarget-dkms,
+Depends: openmediavault (>= 3.0.67), iscsitarget, iscsitarget-dkms,
  linux-headers-amd64 | linux-headers-armel | linux-headers-armhf |
  linux-headers-i386 | linux-headers-mips | linux-headers-mipsel |
  linux-headers-powerpc | linux-headers-ppc64el | linux-headers-s390 |
diff --git a/deb/openmediavault-iscsitarget/var/www/openmediavault/js/omv/module/admin/service/iscsitarget/Targets.js b/deb/openmediavault-iscsitarget/var/www/openmediavault/js/omv/module/admin/service/iscsitarget/Targets.js
index 206ff69be8..59bdedd410 100644
--- a/deb/openmediavault-iscsitarget/var/www/openmediavault/js/omv/module/admin/service/iscsitarget/Targets.js
+++ b/deb/openmediavault-iscsitarget/var/www/openmediavault/js/omv/module/admin/service/iscsitarget/Targets.js
@@ -438,21 +438,25 @@ Ext.define("OMV.module.admin.service.iscsitarget.target.LUNs", {
 	stateful: true,
 	stateId: "3107db90-c1e9-11e0-90c8-00221568ca88",
 	columns: [{
+		xtype: "textcolumn",
 		text: _("Id"),
 		sortable: true,
 		dataIndex: "id",
 		stateId: "id"
 	},{
+		xtype: "textcolumn",
 		text: _("Device"),
 		sortable: true,
 		dataIndex: "devicefile",
 		stateId: "devicefile"
 	},{
+		xtype: "textcolumn",
 		text: _("SCSI Id."),
 		sortable: true,
 		dataIndex: "scsiid",
 		stateId: "scsiid"
 	},{
+		xtype: "textcolumn",
 		text: _("SCSI serial no."),
 		sortable: true,
 		dataIndex: "scsisn",
@@ -635,21 +639,25 @@ Ext.define("OMV.module.admin.service.iscsitarget.target.Targets", {
 	stateful: true,
 	stateId: "15e18b72-c1e9-11e0-a91c-00221568ca88",
 	columns: [{
+		xtype: "textcolumn",
 		text: _("IQN"),
 		sortable: true,
 		dataIndex: "iqn",
 		stateId: "iqn"
 	},{
+		xtype: "textcolumn",
 		text: _("Alias"),
 		sortable: true,
 		dataIndex: "alias",
 		stateId: "alias"
 	},{
+		xtype: "textcolumn",
 		text: _("Max. connections"),
 		sortable: true,
 		dataIndex: "maxconnections",
 		stateId: "maxconnections"
 	},{
+		xtype: "textcolumn",
 		text: _("Comment"),
 		sortable: true,
 		dataIndex: "comment",
diff --git a/deb/openmediavault-netatalk/debian/changelog b/deb/openmediavault-netatalk/debian/changelog
index 27402587ed..a7f9446f94 100755
--- a/deb/openmediavault-netatalk/debian/changelog
+++ b/deb/openmediavault-netatalk/debian/changelog
@@ -1,3 +1,9 @@
+openmediavault-netatalk (3.2.8) stable; urgency=low
+
+  * Various improvements.
+
+ -- Volker Theile <volker.theile@openmediavault.org>  Fri, 17 Mar 2017 11:13:02 +0100
+
 openmediavault-netatalk (3.2.7) stable; urgency=low
 
   * Fix first installation bug.
diff --git a/deb/openmediavault-netatalk/debian/control b/deb/openmediavault-netatalk/debian/control
index 895552c6ba..2015011ac4 100644
--- a/deb/openmediavault-netatalk/debian/control
+++ b/deb/openmediavault-netatalk/debian/control
@@ -9,7 +9,7 @@ Homepage: http://www.openmediavault.org
 
 Package: openmediavault-netatalk
 Architecture: all
-Depends: openmediavault (>= 3.0.60), netatalk (>= 3.1.9)
+Depends: openmediavault (>= 3.0.67), netatalk (>= 3.1.9)
 Priority: optional
 Description: OpenMediaVault netatalk (AppleTalk Protocol Suite) plugin
  Netatalk is an implementation of the AppleTalk Protocol Suite.
diff --git a/deb/openmediavault-netatalk/var/www/openmediavault/js/omv/module/admin/service/afp/Shares.js b/deb/openmediavault-netatalk/var/www/openmediavault/js/omv/module/admin/service/afp/Shares.js
index bcd925c6f3..dcfb0995a8 100644
--- a/deb/openmediavault-netatalk/var/www/openmediavault/js/omv/module/admin/service/afp/Shares.js
+++ b/deb/openmediavault-netatalk/var/www/openmediavault/js/omv/module/admin/service/afp/Shares.js
@@ -211,11 +211,13 @@ Ext.define("OMV.module.admin.service.afp.Shares", {
 		resizable: false,
 		iconCls:  Ext.baseCSSPrefix + "grid-cell-booleaniconcolumn-switch"
 	},{
+		xtype: "textcolumn",
 		text: _("Shared folder"),
 		sortable: true,
 		dataIndex: "sharedfoldername",
 		stateId: "sharedfoldername"
 	},{
+		xtype: "textcolumn",
 		text: _("Comment"),
 		sortable: true,
 		dataIndex: "comment",
diff --git a/deb/openmediavault-route/debian/changelog b/deb/openmediavault-route/debian/changelog
index 742f4d33e2..073d478ebe 100644
--- a/deb/openmediavault-route/debian/changelog
+++ b/deb/openmediavault-route/debian/changelog
@@ -1,3 +1,9 @@
+openmediavault-route (3.1.4) stable; urgency=low
+
+  * Various improvements.
+
+ -- Volker Theile <volker.theile@openmediavault.org>  Fri, 17 Mar 2017 11:14:57 +0100
+
 openmediavault-route (3.1.3) stable; urgency=low
 
   * Fix first installation bug.
diff --git a/deb/openmediavault-route/debian/control b/deb/openmediavault-route/debian/control
index b982d8f05b..cdea06011f 100644
--- a/deb/openmediavault-route/debian/control
+++ b/deb/openmediavault-route/debian/control
@@ -9,7 +9,7 @@ Homepage: http://www.openmediavault.org
 
 Package: openmediavault-route
 Architecture: all
-Depends: openmediavault (>= 3.0.60)
+Depends: openmediavault (>= 3.0.67)
 Priority: optional
 Description: OpenMediaVault IP routing table plugin
  Adds the ability to manipulate the IP routing table via WebGUI.
diff --git a/deb/openmediavault-route/var/www/openmediavault/js/omv/module/admin/system/network/Route.js b/deb/openmediavault-route/var/www/openmediavault/js/omv/module/admin/system/network/Route.js
index de4085cdd0..591f13a8a9 100644
--- a/deb/openmediavault-route/var/www/openmediavault/js/omv/module/admin/system/network/Route.js
+++ b/deb/openmediavault-route/var/www/openmediavault/js/omv/module/admin/system/network/Route.js
@@ -112,16 +112,19 @@ Ext.define("OMV.module.admin.system.network.route.Routes", {
 	stateful: true,
 	stateId: "a6faec48-f389-11e1-8b67-00221568ca88",
 	columns: [{
+		xtype: "textcolumn",
 		text: _("Network"),
 		sortable: true,
 		dataIndex: "network",
 		stateId: "network"
 	},{
+		xtype: "textcolumn",
 		text: _("Gateway"),
 		sortable: true,
 		dataIndex: "gateway",
 		stateId: "gateway"
 	},{
+		xtype: "textcolumn",
 		text: _("Comment"),
 		sortable: true,
 		dataIndex: "comment",
diff --git a/deb/openmediavault-usbbackup/debian/changelog b/deb/openmediavault-usbbackup/debian/changelog
index aa62de13aa..2db04559b5 100644
--- a/deb/openmediavault-usbbackup/debian/changelog
+++ b/deb/openmediavault-usbbackup/debian/changelog
@@ -1,3 +1,9 @@
+openmediavault-usbbackup (3.2.16) stable; urgency=low
+
+  * Various improvements.
+
+ -- Volker Theile <volker.theile@openmediavault.org>  Fri, 17 Mar 2017 11:16:18 +0100
+
 openmediavault-usbbackup (3.2.15) stable; urgency=low
 
   * Various improvements.
diff --git a/deb/openmediavault-usbbackup/debian/control b/deb/openmediavault-usbbackup/debian/control
index 0b988e7410..9928065906 100644
--- a/deb/openmediavault-usbbackup/debian/control
+++ b/deb/openmediavault-usbbackup/debian/control
@@ -9,7 +9,7 @@ Homepage: http://www.openmediavault.org
 
 Package: openmediavault-usbbackup
 Architecture: all
-Depends: rsync, openmediavault (>= 3.0.65)
+Depends: rsync, openmediavault (>= 3.0.67)
 Priority: optional
 Description: OpenMediaVault USB/eSATA backup plugin
  Automatically synchronise a shared folder to an USB/eSATA device and vice
diff --git a/deb/openmediavault-usbbackup/var/www/openmediavault/js/omv/module/admin/service/usbbackup/Jobs.js b/deb/openmediavault-usbbackup/var/www/openmediavault/js/omv/module/admin/service/usbbackup/Jobs.js
index 5773409792..8574e09a9e 100644
--- a/deb/openmediavault-usbbackup/var/www/openmediavault/js/omv/module/admin/service/usbbackup/Jobs.js
+++ b/deb/openmediavault-usbbackup/var/www/openmediavault/js/omv/module/admin/service/usbbackup/Jobs.js
@@ -286,16 +286,19 @@ Ext.define("OMV.module.admin.service.usbbackup.Jobs", {
 		resizable: false,
 		iconCls:  Ext.baseCSSPrefix + "grid-cell-booleaniconcolumn-switch"
 	},{
+		xtype: "textcolumn",
 		text: _("Shared folder"),
 		sortable: true,
 		dataIndex: "sharedfoldername",
 		stateId: "sharedfoldername"
 	},{
+		xtype: "textcolumn",
 		text: _("External storage device"),
 		sortable: true,
 		dataIndex: "devicefile",
 		stateId: "devicefile"
 	},{
+		xtype: "textcolumn",
 		text: _("Comment"),
 		sortable: true,
 		dataIndex: "comment",
diff --git a/deb/openmediavault/debian/changelog b/deb/openmediavault/debian/changelog
index 2613213d84..dc733c3bf1 100644
--- a/deb/openmediavault/debian/changelog
+++ b/deb/openmediavault/debian/changelog
@@ -1,3 +1,9 @@
+openmediavault (3.0.67) stable; urgency=low
+
+  * Improve foreign content handling.
+
+ -- Volker Theile <volker.theile@openmediavault.org>  Fri, 17 Mar 2017 09:59:46 +0100
+
 openmediavault (3.0.66) stable; urgency=low
 
   * Update locales.
diff --git a/deb/openmediavault/var/www/openmediavault/js/omv/grid/column/Text.js b/deb/openmediavault/var/www/openmediavault/js/omv/grid/column/Text.js
new file mode 100644
index 0000000000..d4386fdc6e
--- /dev/null
+++ b/deb/openmediavault/var/www/openmediavault/js/omv/grid/column/Text.js
@@ -0,0 +1,35 @@
+/**
+ * This file is part of OpenMediaVault.
+ *
+ * @license   http://www.gnu.org/licenses/gpl.html GPL Version 3
+ * @author    Volker Theile <volker.theile@openmediavault.org>
+ * @copyright Copyright (c) 2009-2017 Volker Theile
+ *
+ * OpenMediaVault is free software: you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation, either version 3 of the License, or
+ * any later version.
+ *
+ * OpenMediaVault is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with OpenMediaVault. If not, see <http://www.gnu.org/licenses/>.
+ */
+// require("js/omv/util/Format.js")
+
+/**
+ * @ingroup webgui
+ * @class OMV.grid.column.Text
+ * @derived Ext.grid.column.Column
+ */
+Ext.define("OMV.grid.column.Text", {
+	extend: "Ext.grid.column.Column",
+	alias: [ "widget.textcolumn" ],
+
+	defaultRenderer: function(value) {
+		return Ext.util.Format.htmlEncode(value);
+	}
+});
diff --git a/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/privilege/group/Group.js b/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/privilege/group/Group.js
index bed11580a9..77ddae813a 100644
--- a/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/privilege/group/Group.js
+++ b/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/privilege/group/Group.js
@@ -113,6 +113,7 @@ Ext.define("OMV.module.admin.privilege.group.group.Members", {
 		})
 	}],
 	columns: [{
+		xtype: "textcolumn",
 		text: _("Name"),
 		sortable: true,
 		dataIndex: "name",
@@ -390,11 +391,13 @@ Ext.define("OMV.module.admin.privilege.group.Groups", {
 	stateful: true,
 	stateId: "d7c66fd9-2ef5-4107-9a6f-562dcdc2643a",
 	columns: [{
+		xtype: "textcolumn",
 		text: _("Name"),
 		sortable: true,
 		dataIndex: "name",
 		stateId: "name"
 	},{
+		xtype: "textcolumn",
 		text: _("Comment"),
 		sortable: true,
 		dataIndex: "comment",
diff --git a/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/privilege/sharedfolder/SharedFolder.js b/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/privilege/sharedfolder/SharedFolder.js
index e10786ddc3..c3c7920af5 100644
--- a/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/privilege/sharedfolder/SharedFolder.js
+++ b/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/privilege/sharedfolder/SharedFolder.js
@@ -636,6 +636,7 @@ Ext.define("OMV.module.admin.privilege.sharedfolder.SharedFolders", {
 	stateful: true,
 	stateId: "9ab0d7f9-73e0-4815-8960-84157d4b85e5",
 	columns: [{
+		xtype: "textcolumn",
 		text: _("Name"),
 		sortable: true,
 		dataIndex: "name",
@@ -647,17 +648,20 @@ Ext.define("OMV.module.admin.privilege.sharedfolder.SharedFolders", {
 		dataIndex: "device",
 		stateId: "device"
 	},{
+		xtype: "textcolumn",
 		text: _("Relative Path"),
 		sortable: true,
 		dataIndex: "reldirpath",
 		stateId: "reldirpath"
 	},{
+		xtype: "textcolumn",
 		text: _("Absolute Path"),
 		sortable: true,
 		hidden: true,
 		dataIndex: "absdirpath",
 		stateId: "absdirpath"
 	},{
+		xtype: "textcolumn",
 		text: _("Comment"),
 		sortable: true,
 		dataIndex: "comment",
diff --git a/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/privilege/user/User.js b/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/privilege/user/User.js
index f85383b88f..f7b6831455 100644
--- a/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/privilege/user/User.js
+++ b/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/privilege/user/User.js
@@ -191,6 +191,7 @@ Ext.define("OMV.module.admin.privilege.user.user.Groups", {
 		})
 	}],
 	columns: [{
+		xtype: "textcolumn",
 		text: _("Name"),
 		sortable: true,
 		dataIndex: "name",
@@ -590,16 +591,19 @@ Ext.define("OMV.module.admin.privilege.user.Users", {
 	stateful: true,
 	stateId: "98d6fe31-8e12-407b-82f2-7e0acf4006c1",
 	columns: [{
+		xtype: "textcolumn",
 		text: _("Name"),
 		sortable: true,
 		dataIndex: "name",
 		stateId: "name"
 	},{
+		xtype: "textcolumn",
 		text: _("Email"),
 		sortable: true,
 		dataIndex: "email",
 		stateId: "email"
 	},{
+		xtype: "textcolumn",
 		text: _("Comment"),
 		sortable: true,
 		dataIndex: "comment",
diff --git a/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/service/ftp/Shares.js b/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/service/ftp/Shares.js
index e40cadeb1f..d1f57fc522 100644
--- a/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/service/ftp/Shares.js
+++ b/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/service/ftp/Shares.js
@@ -126,11 +126,13 @@ Ext.define("OMV.module.admin.service.ftp.Shares", {
 		resizable: false,
 		iconCls:  Ext.baseCSSPrefix + "grid-cell-booleaniconcolumn-switch"
 	},{
+		xtype: "textcolumn",
 		text: _("Shared folder"),
 		sortable: true,
 		dataIndex: "sharedfoldername",
 		stateId: "sharedfoldername"
 	},{
+		xtype: "textcolumn",
 		text: _("Comment"),
 		sortable: true,
 		dataIndex: "comment",
diff --git a/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/service/nfs/Shares.js b/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/service/nfs/Shares.js
index e42fd83ee6..1e306dd75b 100644
--- a/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/service/nfs/Shares.js
+++ b/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/service/nfs/Shares.js
@@ -129,11 +129,13 @@ Ext.define("OMV.module.admin.service.nfs.Shares", {
 	stateful: true,
 	stateId: "4da5f715-4381-4c6b-8c83-ab23d284d0e3",
 	columns: [{
+		xtype: "textcolumn",
 		text: _("Shared folder"),
 		sortable: true,
 		dataIndex: "sharedfoldername",
 		stateId: "sharedfoldername"
 	},{
+		xtype: "textcolumn",
 		text: _("Client"),
 		sortable: true,
 		dataIndex: "client",
@@ -152,6 +154,7 @@ Ext.define("OMV.module.admin.service.nfs.Shares", {
 			return value;
 		}
 	},{
+		xtype: "textcolumn",
 		text: _("Comment"),
 		sortable: true,
 		dataIndex: "comment",
diff --git a/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/service/rsync/Jobs.js b/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/service/rsync/Jobs.js
index a07f66207c..dc18ade1b8 100644
--- a/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/service/rsync/Jobs.js
+++ b/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/service/rsync/Jobs.js
@@ -628,16 +628,19 @@ Ext.define("OMV.module.admin.service.rsync.Jobs", {
 			"remote": _("Remote")
 		}
 	},{
+		xtype: "textcolumn",
 		text: _("Source"),
 		sortable: true,
 		dataIndex: "srcname",
 		stateId: "srcname"
 	},{
+		xtype: "textcolumn",
 		text: _("Destination"),
 		sortable: true,
 		dataIndex: "destname",
 		stateId: "destname"
 	},{
+		xtype: "textcolumn",
 		text: _("Comment"),
 		sortable: true,
 		dataIndex: "comment",
diff --git a/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/service/rsyncd/Modules.js b/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/service/rsyncd/Modules.js
index 57910c78a0..16cb8dd07f 100644
--- a/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/service/rsyncd/Modules.js
+++ b/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/service/rsyncd/Modules.js
@@ -290,6 +290,7 @@ Ext.define("OMV.module.admin.service.rsyncd.module.AuthUsers", {
 	stateful: true,
 	stateId: "42a21c5a-3dc5-11e1-9f73-af7c01c6821f",
 	columns: [{
+		xtype: "textcolumn",
 		text: _("Name"),
 		sortable: true,
 		dataIndex: "name",
@@ -462,16 +463,19 @@ Ext.define("OMV.module.admin.service.rsyncd.Modules", {
 		resizable: false,
 		iconCls:  Ext.baseCSSPrefix + "grid-cell-booleaniconcolumn-switch"
 	},{
+		xtype: "textcolumn",
 		text: _("Shared folder"),
 		sortable: true,
 		dataIndex: "sharedfoldername",
 		stateId: "sharedfoldername"
 	},{
+		xtype: "textcolumn",
 		text: _("Name"),
 		sortable: true,
 		dataIndex: "name",
 		stateId: "name"
 	},{
+		xtype: "textcolumn",
 		text: _("Comment"),
 		sortable: true,
 		dataIndex: "comment",
diff --git a/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/service/smb/Shares.js b/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/service/smb/Shares.js
index 801719855c..674f963153 100644
--- a/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/service/smb/Shares.js
+++ b/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/service/smb/Shares.js
@@ -327,11 +327,13 @@ Ext.define("OMV.module.admin.service.smb.Shares", {
 		resizable: false,
 		iconCls:  Ext.baseCSSPrefix + "grid-cell-booleaniconcolumn-switch"
 	},{
+		xtype: "textcolumn",
 		text: _("Shared folder"),
 		sortable: true,
 		dataIndex: "sharedfoldername",
 		stateId: "sharedfoldername"
 	},{
+		xtype: "textcolumn",
 		text: _("Comment"),
 		sortable: true,
 		dataIndex: "comment",
diff --git a/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/storage/smart/ScheduledJobs.js b/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/storage/smart/ScheduledJobs.js
index 821dc03aa6..a069616aa9 100644
--- a/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/storage/smart/ScheduledJobs.js
+++ b/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/storage/smart/ScheduledJobs.js
@@ -268,29 +268,34 @@ Ext.define("OMV.module.admin.storage.smart.schedule.Jobs", {
 			"O": _("Offline immediate test")
 		}
 	},{
+		xtype: "textcolumn",
 		text: _("Hour"),
 		sortable: true,
 		dataIndex: "hour",
 		stateId: "hour"
 	},{
+		xtype: "textcolumn",
 		text: _("Day of month"),
 		sortable: true,
 		dataIndex: "dayofmonth",
 		stateId: "dayofmonth",
 		renderer: OMV.util.Format.arrayRenderer(Date.mapDayOfMonth2Digits)
 	},{
+		xtype: "textcolumn",
 		text: _("Month"),
 		sortable: true,
 		dataIndex: "month",
 		stateId: "month",
 		renderer: OMV.util.Format.arrayRenderer(Date.mapMonth2Digits)
 	},{
+		xtype: "textcolumn",
 		text: _("Day of week"),
 		sortable: true,
 		dataIndex: "dayofweek",
 		stateId: "dayofweek",
 		renderer: OMV.util.Format.arrayRenderer(Date.mapDayOfWeek)
 	},{
+		xtype: "textcolumn",
 		text: _("Comment"),
 		sortable: true,
 		dataIndex: "comment",
diff --git a/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/system/certificate/Ssh.js b/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/system/certificate/Ssh.js
index c4e53a81ec..3bccde8998 100644
--- a/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/system/certificate/Ssh.js
+++ b/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/system/certificate/Ssh.js
@@ -122,6 +122,7 @@ Ext.define("OMV.module.admin.system.certificate.ssh.Certificates", {
 	stateful: true,
 	stateId: "bdd0b2ca-1016-11e5-be00-0002b3a176b4",
 	columns: [{
+		xtype: "textcolumn",
 		text: _("Comment"),
 		sortable: true,
 		dataIndex: "comment",
diff --git a/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/system/certificate/Ssl.js b/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/system/certificate/Ssl.js
index 541813a7db..6dc19387e3 100644
--- a/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/system/certificate/Ssl.js
+++ b/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/system/certificate/Ssl.js
@@ -538,6 +538,7 @@ Ext.define("OMV.module.admin.system.certificate.ssl.Certificates", {
 	stateful: true,
 	stateId: "af67e357-d388-4b92-a6d1-076f834c1a0f",
 	columns: [{
+		xtype: "textcolumn",
 		text: _("Name"),
 		sortable: true,
 		dataIndex: "name",
@@ -549,6 +550,7 @@ Ext.define("OMV.module.admin.system.certificate.ssl.Certificates", {
 		dataIndex: "validto",
 		stateId: "validto"
 	},{
+		xtype: "textcolumn",
 		text: _("Comment"),
 		sortable: true,
 		dataIndex: "comment",
diff --git a/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/system/cron/Cron.js b/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/system/cron/Cron.js
index 7e2202a061..b750d2eb0d 100644
--- a/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/system/cron/Cron.js
+++ b/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/system/cron/Cron.js
@@ -308,16 +308,19 @@ Ext.define("OMV.module.admin.system.cron.Jobs", {
 		sortable: true,
 		stateId: "scheduling"
 	},{
+		xtype: "textcolumn",
 		text: _("User"),
 		sortable: true,
 		dataIndex: "username",
 		stateId: "username"
 	},{
+		xtype: "textcolumn",
 		text: _("Command"),
 		sortable: true,
 		dataIndex: "command",
 		stateId: "command"
 	},{
+		xtype: "textcolumn",
 		text: _("Comment"),
 		sortable: true,
 		dataIndex: "comment",
diff --git a/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/system/network/Firewall.js b/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/system/network/Firewall.js
index d5fbe0652c..bc389dde61 100644
--- a/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/system/network/Firewall.js
+++ b/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/system/network/Firewall.js
@@ -290,11 +290,13 @@ Ext.define("OMV.module.admin.system.network.firewall.Rules", {
 			"!icmpv6": _("Not ICMPv6")
 		}
 	},{
+		xtype: "textcolumn",
 		text: _("Extra options"),
 		sortable: false,
 		dataIndex: "extraoptions",
 		stateId: "extraoptions"
 	},{
+		xtype: "textcolumn",
 		text: _("Comment"),
 		sortable: false,
 		dataIndex: "comment",
diff --git a/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/system/network/Interfaces.js b/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/system/network/Interfaces.js
index 51686c8aea..6d25d7055c 100644
--- a/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/system/network/Interfaces.js
+++ b/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/system/network/Interfaces.js
@@ -971,6 +971,7 @@ Ext.define("OMV.module.admin.system.network.interface.Interfaces", {
 		stateId: "wol",
 		width: 45
 	},{
+		xtype: "textcolumn",
 		text: _("Comment"),
 		sortable: true,
 		hidden: true,
diff --git a/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/system/powermanagement/ScheduledJobs.js b/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/system/powermanagement/ScheduledJobs.js
index 2ce7c092fe..018e8da8cf 100644
--- a/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/system/powermanagement/ScheduledJobs.js
+++ b/deb/openmediavault/var/www/openmediavault/js/omv/module/admin/system/powermanagement/ScheduledJobs.js
@@ -308,6 +308,7 @@ Ext.define("OMV.module.admin.system.powermanagement.schedule.Jobs", {
 		sortable: true,
 		stateId: "scheduling"
 	},{
+		xtype: "textcolumn",
 		text: _("Comment"),
 		sortable: true,
 		dataIndex: "comment",
diff --git a/deb/openmediavault/var/www/openmediavault/js/omv/window/MessageBox.js b/deb/openmediavault/var/www/openmediavault/js/omv/window/MessageBox.js
index c4b2dbb2e7..89413e0912 100644
--- a/deb/openmediavault/var/www/openmediavault/js/omv/window/MessageBox.js
+++ b/deb/openmediavault/var/www/openmediavault/js/omv/window/MessageBox.js
@@ -165,8 +165,7 @@ Ext.define("OMV.window.MessageBox", {
 						text += _("Error #") + error.code + ":\n";
 					if(!Ext.isEmpty(error.trace))
 						text += error.trace;
-					details.update(OMV.util.Format.whitespace(
-					  Ext.util.Format.htmlDecode(text), "pre"));
+					details.update(OMV.util.Format.whitespace(text), "pre");
 					if(details.isVisible()) {
 						details.hide();
 						c.setText(_("Show details"));
@@ -201,7 +200,7 @@ Ext.define("OMV.window.MessageBox", {
 						cls: me.baseCls + "-text",
 						html: (Ext.isEmpty(error.message) ?
 						  _("An error has occured") :
-						  Ext.util.Format.htmlDecode(error.message))
+						  Ext.util.Format.htmlEncode(error.message))
 					}]
 				}]
 			}, details = Ext.create("Ext.panel.Panel", {
diff --git a/deb/openmediavault/var/www/openmediavault/js/omv/workspace/grid/Panel.js b/deb/openmediavault/var/www/openmediavault/js/omv/workspace/grid/Panel.js
index aaf638202f..a8f8417393 100644
--- a/deb/openmediavault/var/www/openmediavault/js/omv/workspace/grid/Panel.js
+++ b/deb/openmediavault/var/www/openmediavault/js/omv/workspace/grid/Panel.js
@@ -30,6 +30,7 @@
 // require("js/omv/grid/column/UnixTimestamp.js")
 // require("js/omv/grid/column/WhiteSpace.js")
 // require("js/omv/grid/column/Map.js")
+// require("js/omv/grid/column/Text.js")
 // require("js/omv/grid/column/ToolTip.js")
 // require("js/omv/grid/column/NumberRange.js")
 // require("js/omv/window/MessageBox.js")
