From ee6a322568166e28465da075159a6d4adbf74d53 Mon Sep 17 00:00:00 2001
From: Sully Fischer <fischersully@gmail.com>
Date: Fri, 25 Aug 2017 22:26:25 +0430
Subject: [PATCH] adds and uses strToHex helper

---
 app/Http/helpers.php                  | 17 +++++++++++++++++
 resources/views/layouts/app.blade.php |  2 +-
 2 files changed, 18 insertions(+), 1 deletion(-)

diff --git a/app/Http/helpers.php b/app/Http/helpers.php
index 3194eb3e..c4bcd778 100644
--- a/app/Http/helpers.php
+++ b/app/Http/helpers.php
@@ -201,3 +201,20 @@ function iso8601($time)
         return gmdate('c', strtotime($time));
     }
 }
+
+if (!function_exists('strToHex')) {
+    /**
+     * Converts timestamp to ISO8601 format.
+     *
+     * @param string $string
+     *
+     * @return string
+     */
+    function strToHex($string) {
+        $hex = bin2hex($string);
+        $hex = chunk_split($hex, 2, "\\x");
+        $hex = "\\x" . substr($hex, 0, -2);
+
+        return $hex;
+    }
+}
diff --git a/resources/views/layouts/app.blade.php b/resources/views/layouts/app.blade.php
index 46a5f371..dc3e2809 100755
--- a/resources/views/layouts/app.blade.php
+++ b/resources/views/layouts/app.blade.php
@@ -69,7 +69,7 @@
 <script>
     var auth = {
         id: '{{ Auth::user()->id }}',
-        bio: `{!! Auth::user()->bio !!}`,
+        bio: '{!! strToHex(Auth::user()->bio) !!}',
         name: '{{ Auth::user()->name }}',
         email: '{{ Auth::user()->email }}',
         color: '{{ Auth::user()->color }}',
