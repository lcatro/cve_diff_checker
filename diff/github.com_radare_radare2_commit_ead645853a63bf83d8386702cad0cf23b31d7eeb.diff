From ead645853a63bf83d8386702cad0cf23b31d7eeb Mon Sep 17 00:00:00 2001
From: h4ng3r <h4ng3r@users.noreply.github.com>
Date: Mon, 27 Feb 2017 23:55:33 +0100
Subject: [PATCH] fix #6857

---
 libr/bin/p/bin_dex.c | 2 +-
 sys/asan.sh          | 4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/libr/bin/p/bin_dex.c b/libr/bin/p/bin_dex.c
index 74b6df706b5..be0c0d320d6 100644
--- a/libr/bin/p/bin_dex.c
+++ b/libr/bin/p/bin_dex.c
@@ -1496,7 +1496,7 @@ static int dex_loadcode(RBinFile *arch, RBinDexObj *bin) {
 				continue;
 			}
 
-			if (bin->methods[i].class_id > bin->header.types_size - 1) {
+			if (bin->methods[i].class_id > bin->header.types_size) {
 				continue;
 			}
 
diff --git a/sys/asan.sh b/sys/asan.sh
index 3773f1abf83..0772fd57600 100755
--- a/sys/asan.sh
+++ b/sys/asan.sh
@@ -22,12 +22,12 @@ printf "\033[32m"
 echo "========================================================================="
 printf "\033[0m"
 sleep 1
-export LDFLAGS="-lasan"
+#export LDFLAGS="-lasan"
 
 for a in $ASAN ; do
 	export CFLAGS="${CFLAGS} -fsanitize=$a"
 done
-export CFLAGS="${CFLAGS} -lasan"
+#export CFLAGS="${CFLAGS} -lasan"
 
 echo 'int main(){return 0;}' > .a.c
 [ -z "${CC}" ] && CC=gcc
