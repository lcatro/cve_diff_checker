From cc2853e6cec8ca2cf92430ad9a83358b131fc417 Mon Sep 17 00:00:00 2001
From: Sanket Khidkikar <sanketk@codeaurora.org>
Date: Wed, 12 Aug 2015 15:50:34 +0800
Subject: NETD: close the pipe correctly

Close the opened pipe correctly.

CRs-fixed: 887777

Change-Id: I791bfcc44addb0064486ff6c6b303c7880ec03b4
---
 server/QcRouteController.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/server/QcRouteController.cpp b/server/QcRouteController.cpp
index 425fb13..e0a3e8e 100644
--- a/server/QcRouteController.cpp
+++ b/server/QcRouteController.cpp
@@ -78,8 +78,8 @@ std::string QcRouteController::_runIpCmd(const char * cmd) {
         res = cmd;
         res += ": ";
         res += line;
-        pclose(fp);
     }
+    if (fp != NULL) pclose(fp);
 
     return res;
 }
-- 
cgit v1.1

