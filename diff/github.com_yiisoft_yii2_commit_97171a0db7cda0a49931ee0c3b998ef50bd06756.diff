From 97171a0db7cda0a49931ee0c3b998ef50bd06756 Mon Sep 17 00:00:00 2001
From: Alexander Makarov <sam@rmcreative.ru>
Date: Wed, 18 Jan 2017 01:05:50 +0300
Subject: [PATCH] Fixes #13401: Fixed lack of escaping of request dump at
 exception screens

---
 framework/CHANGELOG.md         | 2 +-
 framework/web/ErrorHandler.php | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/framework/CHANGELOG.md b/framework/CHANGELOG.md
index a3fc2a1a95b..d87be35d68e 100644
--- a/framework/CHANGELOG.md
+++ b/framework/CHANGELOG.md
@@ -104,7 +104,7 @@ Yii Framework 2 Change Log
 - Enh: Added support for field `yii\console\controllers\BaseMigrateController::$migrationNamespaces` setup from CLI (schmunk42)
 - Bug #13287: Fixed translating "and" separator in `UniqueValidator` error message (jetexe)
 - Enh #11464: Populate foreign key names from schema (joaoppereira)
-
+- Bug #13401: Fixed lack of escaping of request dump at exception screens (samdark)
 
 2.0.10 October 20, 2016
 -----------------------
diff --git a/framework/web/ErrorHandler.php b/framework/web/ErrorHandler.php
index 0f45277210c..b43d235675f 100644
--- a/framework/web/ErrorHandler.php
+++ b/framework/web/ErrorHandler.php
@@ -323,7 +323,7 @@ public function renderRequest()
             }
         }
 
-        return '<pre>' . rtrim($request, "\n") . '</pre>';
+        return '<pre>' . $this->htmlEncode(rtrim($request, "\n")) . '</pre>';
     }
 
     /**
