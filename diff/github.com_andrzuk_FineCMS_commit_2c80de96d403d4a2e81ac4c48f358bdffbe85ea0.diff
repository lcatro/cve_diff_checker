From 2c80de96d403d4a2e81ac4c48f358bdffbe85ea0 Mon Sep 17 00:00:00 2001
From: Andrzej <andrzuk@gmail.com>
Date: Mon, 6 Mar 2017 08:55:38 +0100
Subject: [PATCH] Add filtration of URL action parameter.

---
 application/classes/application.php |  2 +-
 application/core/view/roles.php     | 10 +++++-----
 application/core/view/users.php     | 14 +++++++-------
 3 files changed, 13 insertions(+), 13 deletions(-)

diff --git a/application/classes/application.php b/application/classes/application.php
index 4718f16..bbe5b9a 100644
--- a/application/classes/application.php
+++ b/application/classes/application.php
@@ -88,7 +88,7 @@ public function set_controller($controller, $action)
 
 		$class_file = APP_DIR . 'controller/' . MODULE_NAME . '.php';
 		$class_name = ucfirst(MODULE_NAME) . '_Controller';
-		$class_method = ucfirst($action) . '_Action';
+		$class_method = ucfirst(strip_tags($action)) . '_Action';
 
 		// tworzy obiekt kontrolera:
 
diff --git a/application/core/view/roles.php b/application/core/view/roles.php
index f1955be..dc9bf27 100644
--- a/application/core/view/roles.php
+++ b/application/core/view/roles.php
@@ -13,11 +13,11 @@ public function ShowList($columns, $data)
 		$image = 'img/32x32/lock_go.png';
 
 		$attribs = array(
-			array('width' => '5%',  'align' => 'center', 'visible' => '1'),
-			array('width' => '10%', 'align' => 'center', 'visible' => '1', 'image' => '1'),
-			array('width' => '15%', 'align' => 'center', 'visible' => '1'),
-			array('width' => '10%', 'align' => 'center', 'visible' => '1'),
-			array('width' => '50%', 'align' => 'center', 'visible' => '1'),
+			array('width' => '10%',  'align' => 'center', 'visible' => '1'),
+			array('width' => '15%', 'align' => 'left', 'visible' => '1', 'image' => '1'),
+			array('width' => '20%', 'align' => 'left', 'visible' => '1'),
+			array('width' => '10%', 'align' => 'left', 'visible' => '1'),
+			array('width' => '30%', 'align' => 'left', 'visible' => '1'),
 			array('width' => '10%', 'align' => 'center', 'visible' => '1'),
 		);
 		
diff --git a/application/core/view/users.php b/application/core/view/users.php
index 87d7035..cedd4e2 100644
--- a/application/core/view/users.php
+++ b/application/core/view/users.php
@@ -14,16 +14,16 @@ public function ShowList($columns, $data)
 
 		$attribs = array(
 			array('width' => '5%',  'align' => 'center', 'visible' => '1'),
-			array('width' => '8%', 'align' => 'left',   'visible' => '1', 'image' => '1'),
-			array('width' => '5%',  'align' => 'left',   'visible' => '0'),
-			array('width' => '8%', 'align' => 'left',   'visible' => '1'),
+			array('width' => '10%', 'align' => 'left',   'visible' => '1', 'image' => '1'),
+			array('width' => '10%',  'align' => 'left',   'visible' => '0'),
 			array('width' => '10%', 'align' => 'left',   'visible' => '1'),
-			array('width' => '10%', 'align' => 'left', 'visible' => '1'),
-			array('width' => '5%',  'align' => 'center', 'visible' => '1'),
+			array('width' => '10%', 'align' => 'left',   'visible' => '1'),
+			array('width' => '25%', 'align' => 'left', 'visible' => '1'),
+			array('width' => '5%',  'align' => 'left', 'visible' => '1'),
 			array('width' => '10%', 'align' => 'center', 'visible' => '1'),
 			array('width' => '5%', 'align' => 'center', 'visible' => '1'),
-			array('width' => '5%', 'align' => 'center', 'visible' => '1'),
-			array('width' => '5%', 'align' => 'center', 'visible' => '1'),
+			array('width' => '5%', 'align' => 'center', 'visible' => '0'),
+			array('width' => '5%', 'align' => 'center', 'visible' => '0'),
 			array('width' => '5%',  'align' => 'center', 'visible' => '0'),
 			array('width' => '15%', 'align' => 'center', 'visible' => '1'),
 		);
